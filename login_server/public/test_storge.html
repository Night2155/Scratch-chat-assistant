<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Firebase Storage æ¸¬è©¦å·¥å…·</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>

  <style>
    body { font-family: sans-serif; padding: 20px; }
    input { width: 400px; padding: 5px; font-size: 14px; }
    button { padding: 6px 12px; font-size: 14px; margin-left: 8px; }
    a { display: block; margin-top: 10px; word-break: break-all; }
  </style>
</head>
<body>
  <h2>ğŸ§ª Firebase Storage ä¸‹è¼‰é€£çµæ¸¬è©¦</h2>

  <label for="pathInput">è¼¸å…¥ Storage è·¯å¾‘ï¼š</label><br>
  <input type="text" id="pathInput" placeholder="ä¾‹å¦‚ sb3_files/åŸºç¤ä»»å‹™ä¸€.sb3" />
  <button onclick="getDownloadLink()">å–å¾—é€£çµ</button>

  <p id="status"></p>
  <div id="result"></div>

  <script>
    // åˆå§‹åŒ– Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBYg4xnd5il5QcsYfJu1Zj89wdoYHqjlAo",
      authDomain: "scratch-ct-chatbot-2025.firebaseapp.com",
      projectId: "scratch-ct-chatbot-2025",
      storageBucket: "scratch-ct-chatbot-2025.firebasestorage.app",
      messagingSenderId: "890112360772",
      appId: "1:890112360772:web:7b9911703cbb6f8b171711"
    };
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    async function getDownloadLink() {
      const path = document.getElementById("pathInput").value.trim();
      const statusEl = document.getElementById("status");
      const resultEl = document.getElementById("result");
      resultEl.innerHTML = "";
      if (!path) {
        statusEl.textContent = "â— è«‹è¼¸å…¥ Storage æª”æ¡ˆè·¯å¾‘";
        return;
      }

      statusEl.textContent = "â³ æ­£åœ¨å–å¾—ä¸‹è¼‰é€£çµ...";
      try {
        const ref = storage.ref(path);
        const url = await ref.getDownloadURL();
        statusEl.textContent = "âœ… æˆåŠŸå–å¾—é€£çµï¼š";
        resultEl.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
      } catch (err) {
        statusEl.textContent = "âŒ éŒ¯èª¤ï¼š" + err.message;
        console.error(err);
      }
    }
  </script>
</body>
</html>